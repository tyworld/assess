<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Assessment</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Montserrat:300,400,500,700"
          rel="stylesheet">

    <!-- Bootstrap CSS File -->
    <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Libraries CSS Files -->
    <link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/ionicons/css/ionicons.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">

    <!-- Main Stylesheet File -->
    <link href="css/style.css" rel="stylesheet">


</head>

<body>

<!--==========================
  Header
============================-->
<header id="header">
    <div class="container-fluid">

        <div id="logo" class="pull-left">
            <h1><a href="#intro" class="scrollto">Access</a></h1>
            <!-- Uncomment below if you prefer to use an image logo -->
            <!-- <a href="#intro"><img src="img/logo.png" alt="" title="" /></a>-->
        </div>

        <nav id="nav-menu-container">
            <ul class="nav-menu">
                <li class="menu-active"><a href="#intro">首页</a></li>
                <li><a href="#about">关于我们</a></li>
                <li><a href="#services">员工打分</a></li>
                <li><a href="#services">考核统计</a></li>
            </ul>
        </nav><!-- #nav-menu-container -->
    </div>
</header><!-- #header -->

<!--==========================
  Intro Section
============================-->
<section id="intro">
    <div class="intro-container">
        <div id="introCarousel" class="carousel  slide carousel-fade" data-ride="carousel">

            <ol class="carousel-indicators"></ol>

            <div class="carousel-inner" role="listbox">

                <div class="carousel-item active" style="background-image: url('img/intro-carousel/1.jpg');">
                    <div class="carousel-container">
                        <div class="carousel-content">
                            <h2>团队协作</h2>
                            <p>与其他成员沟通协调合作的能力。</p>
                            <a href="#services" class="btn-get-started scrollto">考核</a>
                        </div>
                    </div>
                </div>

                <div class="carousel-item" style="background-image: url('img/intro-carousel/3.jpg');">
                    <div class="carousel-container">
                        <div class="carousel-content">
                            <h2>个人能力</h2>
                            <p>有效完成工作，高效学习、处理问题的能力。</p>
                            <a href="#services" class="btn-get-started scrollto">考核</a>
                        </div>
                    </div>
                </div>

                <div class="carousel-item" style="background-image: url('img/intro-carousel/2.jpg');">
                    <div class="carousel-container">
                        <div class="carousel-content">
                            <h2>工作态度</h2>
                            <p>对工作的认真度、责任度、努力程度等。</p>
                            <a href="#services" class="btn-get-started scrollto">考核</a>
                        </div>
                    </div>
                </div>
            </div>

            <a class="carousel-control-prev" href="#introCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon ion-chevron-left" aria-hidden="true"></span>
                <span class="sr-only">上一个</span>
            </a>

            <a class="carousel-control-next" href="#introCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon ion-chevron-right" aria-hidden="true"></span>
                <span class="sr-only">下一个</span>
            </a>

        </div>
    </div>
</section><!-- #intro -->

<main id="main">

    <!--==========================
      Featured Services Section
    ============================-->
    <section id="featured-services">
        <div class="container">
            <div class="row">

                <div class="col-lg-4 box">
                    <i class="ion-ios-bookmarks-outline"></i>
                    <h4 class="title"><a href="">安全</a></h4>
                    <p class="description">基于新一代公链星云链加密</p>
                </div>

                <div class="col-lg-4 box box-bg">
                    <i class="ion-ios-stopwatch-outline"></i>
                    <h4 class="title"><a href="">简单</a></h4>
                    <p class="description">基于钱包地址，无需注册</p>
                </div>

                <div class="col-lg-4 box">
                    <i class="ion-ios-heart-outline"></i>
                    <h4 class="title"><a href="">私密</a></h4>
                    <p class="description">免实名档案</p>
                </div>

            </div>
        </div>
    </section><!-- #featured-services -->

    <!--==========================
      About Us Section
    ============================-->
    <section id="about">
        <div class="container">

            <header class="section-header">
                <h3>About Us</h3>
                <p>
                    Access是一个基于新一代区块链公链星云链的员工考核统计工具，从团队协作、个人能力、工作态度三大基础方面对员工打分，统计出报表，简单直观的反应员工整体情况。帮助公司对员工进行考核。信息完全安全、隐秘、不可篡改。</p>
            </header>

            <div class="row about-cols">

                <div class="col-md-4 wow fadeInUp">
                    <div class="about-col">
                        <div class="img">
                            <img src="img/about-mission.jpg" alt="" class="img-fluid">
                            <div class="icon"><i class="ion-ios-speedometer-outline"></i></div>
                        </div>
                        <h2 class="title"><a href="#">考核分制</a></h2>
                        <p>
                            以“百分制”考核，让管理者对工作完成情况进行细致评分，灵活满足企业不同的考核需求
                        </p>
                    </div>
                </div>

                <div class="col-md-4 wow fadeInUp" data-wow-delay="0.1s">
                    <div class="about-col">
                        <div class="img">
                            <img src="img/about-plan.jpg" alt="" class="img-fluid">
                            <div class="icon"><i class="ion-ios-list-outline"></i></div>
                        </div>
                        <h2 class="title"><a href="#">考核周期</a></h2>
                        <p>
                            可按月度、季度、年度等周期进行考核，让企业清晰掌握各周期阶段绩效目标的完成情况
                        </p>
                    </div>
                </div>

                <div class="col-md-4 wow fadeInUp" data-wow-delay="0.2s">
                    <div class="about-col">
                        <div class="img">
                            <img src="img/about-vision.jpg" alt="" class="img-fluid">
                            <div class="icon"><i class="ion-ios-eye-outline"></i></div>
                        </div>
                        <h2 class="title"><a href="#">绩效等级</a></h2>
                        <p>
                            绩效等级制度支持对员工分等级测评，如“优、良、差”等，有效评估员工工作完成质量
                        </p>
                    </div>
                </div>

            </div>

        </div>
    </section><!-- #about -->

    <!--==========================
      Services Section
    ============================-->
    <section id="services">
        <div class="container">

            <header class="section-header wow fadeInUp">
                <h3>Services</h3>
            </header>
            <div class="row">
                <div class="start-btn" id="createAccount">
                    员工考核
                </div>
            </div>
            <div class="row form-horizontal" style="display: none;margin-top: 30px">
                <div class="form col-md-12">
                    <form action="" method="post" role="form" class="userInfo">
                        <div class="form-row">
                            <div class="form-group col-md-1">
                                员工
                            </div>
                            <div class="form-group col-md-5">
                                <input type="text" class="form-control" id="userId" placeholder="填写姓名即可查询到员工考核信息"/>
                            </div>
                            <div class="form-group col-md-1">月份</div>
                            <div class="form-group col-md-5">
                                <select id="month" class="form-control">
                                    <option value="">选择月份</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-1">
                                任务质量
                            </div>
                            <div class="form-group col-md-5">
                                <input type="number" class="form-control" id="zl" maxlength="3"/>
                            </div>
                            <div class="form-group col-md-1">
                                沟通协调
                            </div>
                            <div class="form-group col-md-5">
                                <input type="number" class="form-control" id="gt" maxlength="3"/>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-1">
                                学习能力
                            </div>
                            <div class="form-group col-md-5">
                                <input type="number" class="form-control" id="xx" maxlength="3"/>
                            </div>
                            <div class="form-group col-md-1">
                                工作态度
                            </div>
                            <div class="form-group col-md-5">
                                <input type="number" class="form-control" id="td" maxlength="3"/>
                            </div>
                        </div>
                        <div class="form-row">

                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-1">
                                备注
                            </div>
                            <div class="form-group col-md-11">
                                <textarea class="form-control" name="message" rows="3" placeholder="备注"></textarea>
                            </div>
                        </div>
                        <div class="start-btn" id="push">
                            提交
                        </div>
                    </form>
                </div>
            </div>

            <div class="myAccount" style="width: 100%;overflow:hidden;margin-top: 50px;">
                <div style="overflow: hidden">
                    <div id="main1" style="width: 50%;height:400px;float: left;"></div>
                    <div id="main2" style="width: 50%;height:400px;float: left;"></div>
                </div>
            </div>

        </div>
    </section><!-- #services -->

    <!--==========================
      Call To Action Section
    ============================-->
    <section id="call-to-action" class="wow fadeIn">
        <div class="container text-center">
            <h3>有效管理员工、激励人才成长</h3>
            <p>挖掘问题、促进成长、激发潜能、达成目标、实现共赢</p>
            <!--<a class="cta-btn" href="###">创建我的团队</a>-->
        </div>
    </section><!-- #call-to-action -->

    <!--<section id="contact" class="section-bg wow fadeInUp">
        <div class="container">
            <div class="section-header">
                <h3>Contact Us</h3>
                <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque</p>
            </div>
            <div class="form">
                <form action="" method="post" role="form" class="contactForm">
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <select name="" id="" class="form-control">
                                <option value="">abc</option>
                                <option value="">abc</option>
                            </select>
                        </div>
                        <div class="form-group col-md-6">
                            <input type="email" class="form-control" name="email" id="email" placeholder="Your Email"
                                   data-rule="email" data-msg="Please enter a valid email"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" name="subject" id="subject" placeholder="Subject"
                               data-rule="minlen:4" data-msg="Please enter at least 8 chars of subject"/>
                    </div>
                    <div class="form-group">
                        <textarea class="form-control" name="message" rows="5" data-rule="required"
                                  data-msg="Please write something for us" placeholder="Message"></textarea>
                    </div>
                    <div class="text-center">
                        <button type="submit">Send Message</button>
                    </div>
                </form>
            </div>

        </div>
    </section>-->

</main>
<footer id="footer">
    <div class="container">
        <div class="copyright">
            &copy; Copyright 基于新一代区块链公链<a href="https://nebulas.io/" target="_blank">NAS</a>
        </div>
        <div class="credits">
            <a href="https://incentive.nebulas.io/cn/signup.html?invite=32KAi"
               target="_blank">点我发布DAPP获取100NAS</a>
        </div>
    </div>
</footer><!-- #footer -->

<a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>

<!-- JavaScript Libraries -->
<script src="lib/jquery/jquery.min.js"></script>
<script src="lib/jquery/jquery-migrate.min.js"></script>
<script src="lib/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="lib/easing/easing.min.js"></script>
<script src="lib/superfish/hoverIntent.js"></script>
<script src="lib/superfish/superfish.min.js"></script>
<script src="lib/wow/wow.min.js"></script>
<script src="lib/waypoints/waypoints.min.js"></script>
<script src="lib/counterup/counterup.min.js"></script>
<script src="lib/owlcarousel/owl.carousel.min.js"></script>
<script src="lib/isotope/isotope.pkgd.min.js"></script>
<script src="lib/lightbox/js/lightbox.min.js"></script>
<script src="lib/touchSwipe/jquery.touchSwipe.min.js"></script>
<!-- Contact Form JavaScript File -->
<script src="contactform/contactform.js"></script>

<!-- Template Main Javascript File -->
<script src="js/main.js"></script>
<script src=js/nebPay.js></script>
<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script src="js/layer/layer.js" type="text/javascript" charset="utf-8"></script>
<script>
    $(function () {
        var NebPay = require("nebpay");
        var nebPay = new NebPay();

        var dappAddress = "n1jWFQgC1R67RwbbVwW1U35tP9VGpUmLGYQ";
        //检查扩展是否已安装
        //如果安装了扩展，var“webExtensionWallet”将被注入到web页面中1
        setTimeout(function () {
            if (typeof (webExtensionWallet) === "undefined") {
                //alert ("扩展钱包未安装，请先安装.")
                $("#noExtension").show();
            }
        }, 500);

        var hasAccount = false;

        function search() {
            var to = dappAddress;
            var value = "0";
            var callFunction = "get";
            var callArgs = [];
            //callArgs.push(token);
            nebPay.simulateCall(to, value, callFunction, JSON.stringify(callArgs), {
                listener: cbSearch
            });
        }

        search();
        setInterval(function () {
            search();
        }, 10 * 1000);

        $('#createAccount').on('click', function () {
            $(this).hide();
            search();
            $('.form-horizontal').show();
            $('.myAccount').css('height', '0');
            hasAccount = true;
        });

        function cbSearch(resp) {
            var result = resp.result
            if (result === 'null' || result == '') {
                if (!hasAccount) {
                    $('#createAccount').show();
                }
            } else {
                $('.form-horizontal').show();
                $('.myAccount').css('height', 'auto');
                /* Vue.set(app, 'list', obj);
                 $('#app').show();*/

                var resultObj = JSON.parse(result);
                var len = resultObj.value.split('|-').length;
                var zl_sum = 0;
                var gt_sum = 0;
                var xx_sum = 0;
                var td_sum = 0;
                var count=0;
                for (var i = 0; i < len; i++) {
                    if (resultObj.value.split('|-')[i] == $('#userId').val()) {
                        zl_sum += parseInt(resultObj.zl.split('|-')[i]);
                        gt_sum += parseInt(resultObj.gt.split('|-')[i]);
                        xx_sum += parseInt(resultObj.xx.split('|-')[i]);
                        td_sum += parseInt(resultObj.td.split('|-')[i]);
                        count++;
                    }

                }
                var yAxis = [];
                for (var i = 0; i < len; i++) {
                    if (resultObj.value.split('|-')[i] == $('#userId').val()) {
                        yAxis.push(avg(resultObj.zl.split('|-')[i], resultObj.gt.split('|-')[i], resultObj.xx.split('|-')[i], resultObj.td.split('|-')[i]))
                    }
                }
                myChart.setOption({
                    title: {
                        text: '能力雷达',
                    },
                    series: [
                        {
                            data: [
                                {
                                    value: [parseInt(zl_sum / count), parseInt(gt_sum / count), parseInt(xx_sum / count), parseInt(td_sum / count)],
                                    name: $('#userId').val()
                                }
                            ]
                        }
                    ]
                });

                myChart2.setOption({
                    title: {
                        text: '月度统计',
                    },
                    series: [{data: yAxis}]
                });
            }
        }

        $("#push").click(function () {
            var userId = $('#userId').val();
            var month = $('#month').val();
            var zl = $('#zl').val();
            var gt = $('#gt').val();
            var xx = $('#xx').val();
            var td = $('#td').val();
            if (userId == '') {
                layer.msg('姓名不能为空');
                return;
            } else if (month == '') {
                layer.msg('月份不能为空');
                return;
            } else if (zl == '') {
                layer.msg('任务质量不能为空');
                return;
            }else if (gt == '') {
                layer.msg('沟通协调不能为空');
                return;
            }else if (xx == '') {
                layer.msg('学习能力不能为空');
                return;
            }else if (td == '') {
                layer.msg('工作态度不能为空');
                return;
            }
            var to = dappAddress;
            var value = "0";
            var callFunction = "save"
            var callArgs = [];
            callArgs.push(userId.toString());
            callArgs.push(month.toString());
            callArgs.push(zl.toString());
            callArgs.push(gt.toString());
            callArgs.push(xx.toString());
            callArgs.push(td.toString());
            nebPay.call(to, value, callFunction, JSON.stringify(callArgs), {
                listener: cbPush
            });
        });

        function cbPush(resp) {
            console.log("response of push: " + resp)
        }
    })
</script>
<script src="js/echarts.min.js"></script>
<script type="text/javascript">
    function avg(a, b, c, d) {
        return parseInt((parseInt(a) + parseInt(b) + parseInt(c) + parseInt(d)) / 4);
    }


    var myChart = echarts.init(document.getElementById('main1'));
    var option = {
        title: {
            text: '能力雷达示例',
            x: 'center'
        },
        tooltip: {
            trigger: 'axis'
        },
        toolbox: {
            show: true,
            feature: {
                dataView: {show: true, readOnly: false},
                restore: {show: true},
                saveAsImage: {show: true}
            }
        },
        radar: [
            {
                indicator: [
                    {text: '任务质量', max: 100},
                    {text: '沟通协调', max: 100},
                    {text: '学习能力', max: 100},
                    {text: '工作态度', max: 100}
                ],
                radius: 110
            },
        ],
        calculable: true,
        legend: {
            orient: 'vertical',
            left: 'left',
            data: []
        },
        series: [
            {
                type: 'radar',
                tooltip: {
                    trigger: 'item'
                },
                itemStyle: {normal: {areaStyle: {type: 'default'}}},
                data: [
                    {
                        value: [60, 73, 95, 55],
                        name: '某员工'
                    }
                ]
            }
        ]
    };
    //-------------------------------------------------
    var myChart2 = echarts.init(document.getElementById('main2'));
    var option2 = {
        title: {
            text: '月度统计示例'
        },
        tooltip: {},
        legend: {
            data: ['消费']
        },
        toolbox: {
            show: true,
            feature: {
                dataView: {show: true, readOnly: false},
                magicType: {show: true, type: ['bar', 'line']},
                restore: {show: true},
                saveAsImage: {show: true}
            }
        },
        calculable: true,
        xAxis: {
            data: ['一月', '二月', '三月', '四月', '五月', '六月']
        },
        yAxis: {},
        series: [{
            name: '考核',
            type: 'line',
            data: [80, 87, 76, 75, 85, 96]
        }]
    };

    myChart.setOption(option);
    myChart2.setOption(option2);
</script>
</body>
</html>
